#!/bin/bash

#获取设备型号
DEVICENAME=$(cat /sys/devices/virtual/dmi/id/product_name)

# RESOLUTION
H720_LIST="G1618-03"
if [[ ":$H720_LIST:" =~ ":$DEVICENAME:"  ]]; then
        WIDTH=1280
	HEIGHT=720
fi

export WIDTH=${WIDTH:-"1280"}
export HEIGHT=${HEIGHT:-"800"}

# PREFER_OUTPUT
DSI1_LIST="G1618-03"
if [[ ":$DSI1_LIST:" =~ ":$DEVICENAME:"  ]]; then
        PREFER_OUTPUT=DSI1
fi

export PREFER_OUTPUT=${PREFER_OUTPUT:-"eDP-1"}

# 30~60 刷新率设备
RWFRES30_LIST="ONEXPLAYER 2 ARP23"
# 40~60 刷新率设备
RWFRES40_LIST="G1619-04:G1618-04"

if [[ ":$RWFRES30_LIST:" =~ ":$DEVICENAME:"  ]]; then
        REFRESH_LIMITS="30,60"
elif [[ ":$RWFRES40_LIST:" =~ ":$DEVICENAME:"  ]]; then
        REFRESH_LIMITS="40,60"
else
        REFRESH_LIMITS="50,60"
fi

export REFRESH_LIMITS=${REFRESH_LIMITS}



# OXP 一号本设备
OXP_LIST="ONE XPLAYER:ONEXPLAYER 1 T08:ONEXPLAYER 1S A08:ONEXPLAYER 1S T08:ONEXPLAYER mini A07:ONEXPLAYER mini GA72:ONEXPLAYER mini GT72:ONEXPLAYER GUNDAM GA72:ONEXPLAYER 2 ARP23:ONEXPLAYER Mini Pro"
# AYANEO AIR 设备
AIR_LIST="AIR:AIR Pro:AIR Plus"
# AYANEO AYA 设备
AYA_LIST="NEXT:NEXT Pro:NEXT Advance:AYANEO NEXT:AYANEO NEXT Pro:AYANEO NEXT Advance:AYA NEO Fouder:AYA NEO 2021:AYANEO 2021:AYANEO 2021 Pro:AYANEO 2021 Pro:AYANEO 2021 Pro Retro Power:AYANEO 2:GEEK"
# AOKZOE 奥克设备
AOK_LIST="AOKZOE A1 AR07"
# GPD 设备
GPD_LIST="G1619-04:G1618-04"

ORIENTATION_LEFT_LIST="${AIR_LIST}:${OXP_LIST}:${AOK_LIST}"

if [[ ":$ORIENTATION_LEFT_LIST:" =~ ":$DEVICENAME:"  ]]; then
        ORIENTATION="--force-orientation left"
else
        ORIENTATION=""
fi

export ORIENTATION=${ORIENTATION}


# EXTRA_VARS
FULLSCREEN_LIST="G1618-03"

if [[ ":$FULLSCREEN_LIST:" =~ ":$DEVICENAME:"  ]]; then
        EXTRA_VARS="-f"
else
        EXTRA_VARS=""
fi

export EXTRA_VARS=${EXTRA_VARS}

# INTEL WORKAROUND
VGA_DEVICE=$(lspci | grep VGA)
if [[ "$VGA_DEVICE" =~ "Intel" ]]; then
    export INTEL_DEBUG=noccs
    export mesa_glthread=true
    export MANGOHUD=1
fi
